<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}</title>
  <meta name="description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}">

  <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl }}">
  <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ "/feed.xml" | prepend: site.baseurl }}" />

  <!-- jQuery & Hammer.js -->
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.4/hammer.min.js"></script>

  <!-- Icons & Manifest -->
  <link rel="apple-touch-icon" sizes="180x180" href="{{ site.baseurl }}/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ site.baseurl }}/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="512x512" href="{{ site.baseurl }}/icons/favicon-512x512.png">
  <link rel="manifest" href="{{ site.baseurl }}/manifest.json">
  <link rel="shortcut icon" href="{{ site.baseurl }}/icons/favicon.ico">
  <meta name="msapplication-TileColor" content="#F53200">
  <meta name="msapplication-config" content="{{ site.baseurl }}/icons/browserconfig.xml">
  <meta name="theme-color" content="#F53200">

  <!-- Open Graph / Social Meta -->
  <meta property="og:url" content="{% if page.title %}{{ page.url | replace:'index.html','' | prepend: site.baseurl }}{% else %}{{ site.baseurl }}{% endif %}">
  <meta property="og:type" content="website">
  <meta property="og:title" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}">
  <meta property="og:description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}">
  <meta property="og:image" content="{% if page.title %}{{ site.baseurl }}/images/{{ page.image }}{% else %}/assets/social.png{% endif %}">

  <!-- Twitter Meta -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@chowdownapp">
  <meta name="twitter:creator" content="@clarklab">
  <meta name="twitter:title" content="{% if page.title %}{{ page.title }}{% else %}Chowdown{% endif %}">
  <meta name="twitter:description" content="{% if page.directions %}{{ page.content | strip_html }}{% else %}Chowdown{% endif %}">
  <meta name="twitter:image:src" content="{% if page.image %}{{ site.baseurl }}/images/{{ page.image }}{% else %}{{ site.baseurl }}/images/crockpot-buffalo-chicken.jpg{% endif %}">

  <!-- Tailwind + Fonts -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://use.typekit.net/htf0jhw.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { primary: '#F53200' },
          boxShadow: { '3xl': '0 0px 60px -15px rgba(0, 0, 0, 0.5)' },
          fontFamily: { gelica: ['Fira Sans', 'sans-serif'], inter: ['Fira Sans', 'sans-serif'] },
        },
      },
    };
  </script>

  <!-- Service Worker -->
  <script>
    if ("serviceWorker" in navigator) {
      if (!navigator.serviceWorker.controller) {
        navigator.serviceWorker.register("{{ site.baseurl }}/serviceworker.js", { scope: "./" })
          .then(reg => console.log("Service worker registered for scope: " + reg.scope));
      }
    }
  </script>
</head>

<body class="flex h-full font-inter bg-orange-50 text-orange-950">
  <!-- Sidebar Nav -->
  <nav class="w-full md:w-56 lg:w-64 md:h-full bg-orange-50 fixed md:relative left-0 bottom-0 flex md:flex-col justify-between md:justify-start px-4 py-3 md:px-6 md:py-6 md:gap-4 z-10 shadow-3xl md:shadow-none {% if page.url contains '/recipes/' %}md:hidden{% endif %}">
    <a href="/" class="flex flex-col md:flex-row items-center gap-0 md:gap-2 {% if page.url == '/' %}text-primary{% endif %}">
      <svg class="w-12 md:w-10" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M18 16.25H15V7.5H12V16.25H9V7.5H6V16.25C6 18.9 8.49 21.05 11.625 21.2125V32.5H15.375V21.2125C18.51 21.05 21 18.9 21 16.25V7.5H18V16.25ZM25.5 12.5V22.5H29.25V32.5H33V7.5C28.86 7.5 25.5 10.3 25.5 12.5Z" fill="currentColor" />
      </svg>
      <span class="text-sm md:text-2xl font-medium md:font-gelica">Recipes</span>
    </a>

    <a href="/search" class="flex flex-col md:flex-row items-center gap-0 md:gap-2 {% if page.url == '/search.html' or page.url == '/search/' %}text-primary{% endif %}">
      <svg class="w-12 md:w-10" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M13 21.5C13 16.8056 16.8056 13 21.5 13C26.1944 13 30 16.8056 30 21.5C30 23.8248 29.0667 25.9315 27.5544 27.4661C27.5392 27.4801 27.5241 27.4946 27.5093 27.5093C27.4946 27.5241 27.4801 27.5392 27.4661 27.5544C25.9315 29.0667 23.8248 30 21.5 30C16.8056 30 13 26.1944 13 21.5ZM28.502 30.6233C26.5628 32.1139 24.1349 33 21.5 33C15.1487 33 10 27.8513 10 21.5C10 15.1487 15.1487 10 21.5 10C27.8513 10 33 15.1487 33 21.5C33 24.1349 32.1139 26.5628 30.6233 28.502L37.5607 35.4393C38.1464 36.0251 38.1464 36.9749 37.5607 37.5607C36.9749 38.1465 36.0251 38.1465 35.4393 37.5607L28.502 30.6233Z" fill="currentColor" />
      </svg>
      <span class="text-sm md:text-2xl font-medium md:font-gelica">Search</span>
    </a>

    <a href="#" class="flex flex-col md:flex-row items-center gap-0 md:gap-2 coming-soon">
      <svg class="w-12 md:w-10" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M15.5 12C14.1184 12 13 13.1184 13 14.5V34C13 34.8284 12.3284 35.5 11.5 35.5C10.6716 35.5 10 34.8284 10 34V14.5C10 11.4616 12.4616 9 15.5 9H36.5C37.3284 9 38 9.67157 38 10.5V30.5C38 31.3284 37.3284 32 36.5 32C35.6716 32 35 31.3284 35 30.5V12H15.5Z" fill="#212121"/>
        <path d="M28 34H20V41C20 41.404 20.244 41.77 20.618 41.924C20.992 42.082 21.42 41.994 21.708 41.708L24 39.416L26.292 41.708C26.484 41.9 26.74 42 27 42C27.128 42 27.26 41.976 27.382 41.924C27.756 41.77 28 41.404 28 41V34Z" fill="#212121"/>
        <span class="label text-sm md:text-2xl font-medium md:font-gelica">Books</span>
      </svg>
    </a>
  </nav>

  <!-- Coming Soon label script -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.coming-soon').forEach(link => {
        link.addEventListener('click', function(event) {
          event.preventDefault();
          const label = this.querySelector('.label');
          if (label) label.textContent = 'Soon';
        });
      });
    });
  </script>
  <script>
    const functionsBaseUrl = window.location.hostname === "localhost" ? "http://localhost:8888" : "";

    fetch(`${functionsBaseUrl}/.netlify/functions/hello`)
      .then(response => {
        if (!response.ok) throw new Error("Network response was not ok");
        return response.json();
      })
      .then(data => {
        console.log("Function response:", data);
      })
      .catch(err => {
        console.error("Error calling function:", err);
      });
  </script>

</body>
</html> 